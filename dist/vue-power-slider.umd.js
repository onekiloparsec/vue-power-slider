var I=Object.defineProperty;var C=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var H=(s,l,g)=>l in s?I(s,l,{enumerable:!0,configurable:!0,writable:!0,value:g}):s[l]=g,k=(s,l)=>{for(var g in l||(l={}))j.call(l,g)&&H(s,g,l[g]);if(C)for(var g of C(l))G.call(l,g)&&H(s,g,l[g]);return s};(function(s,l){typeof exports=="object"&&typeof module!="undefined"?l(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],l):(s=typeof globalThis!="undefined"?globalThis:s||self,l(s.VuePowerSlider={},s.Vue))})(this,function(s,l){"use strict";const g=/(\d*\.?\d+)\s?(cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%+)/i;var N=e=>{const t=e.match(g);return t!==null&&t.length<=3},T={width:{type:String,default:"100%",validator:N},height:{type:Number,default:6},color:{type:String,default:"#FB2727"},trackColor:{type:String,default:"#f1f6f828"},max:{type:Number,default:100},min:{type:Number,default:0},step:{type:Number,default:1,validator(e){return e!==0?!0:(console.error("[Vue3Slider] Error: Step cannot be 0"),!1)}},tooltip:{type:String,default:"auto"},tooltipText:{type:String,default:"%v",validator(e){return e.includes("%v")?!0:(console.error("[Vue3Slider] Error: tooltip text must contain %v"),!1)}},tooltipColor:{type:String,default:"#FFFFFF"},tooltipTextColor:{type:String,default:"#000000"},handleColor:{type:String,default:"#FFFFFF"},handleBorderColor:{type:String,default:"#CCCCCC"},orientation:{type:String,default:"horizontal",validator(e){return e==="horizontal"||e==="vertical"||e==="circular"}},modelValue:{type:Number,default:0,required:!0},repeat:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},flip:{type:Boolean,default:!1},circleOffset:{type:Number,default:0,validator(e){return e>=0&&e<=360}}};function $(e){const t=l.ref(document.createElement("div")),i=l.ref(e.modelValue);e.min!==0&&(i.value-=e.min);const o=l.ref(0),u=l.ref(0),c=l.ref(0),n=l.ref(1);let a=l.computed(()=>{let h=0;return e.min<0?h=e.max+Math.abs(e.min):h=e.max-e.min,h});const w=l.computed(()=>{if(e.orientation!=="circular")return 0;const h=i.value/(a.value/360);return e.flip?-h:h}),r=l.ref(!1);return{slider:t,modelValueUnrounded:i,formattedSliderValue:o,filledWidth:c,pixelsPerStep:n,sliderRange:a,sliderValueDegrees:w,sliderWidth:u,holding:r}}function M(e,t){l.watchEffect(()=>{e.filledWidth.value=E(e,t)});const i=new ResizeObserver(o=>{e.filledWidth.value=E(e,t),e.sliderWidth.value=e.slider.value?t.orientation==="vertical"?e.slider.value.clientHeight:e.slider.value.clientWidth:0,e.slider.value!==o[0].target&&e.slider.value instanceof Element&&(i.unobserve(o[0].target),i.observe(e.slider.value))});e.slider.value&&i.observe(e.slider.value)}function E(e,t){const i=e.slider;if(!i.value)return 0;const o=t.orientation==="vertical"?i.value.clientHeight:i.value.clientWidth;return e.pixelsPerStep.value=o/e.sliderRange.value,Math.max(Math.min(e.modelValueUnrounded.value*e.pixelsPerStep.value,o),0)}function z(e,t){const i=new ResizeObserver(o=>{e.value&&(t.value=e.value.clientWidth,e.value!==o[0].target&&(i.unobserve(o[0].target),e.value&&i.observe(e.value)))});e.value&&i.observe(e.value)}function O(e,t,i){const o=c=>{const n=e.modelValueUnrounded.value+c;n<=0?i(0):n>=e.sliderRange.value?i(e.sliderRange.value):i(n)};return{handleKeydown:c=>{switch(c.key){case"ArrowRight":case"ArrowUp":o(t.step);break;case"ArrowLeft":case"ArrowDown":o(-t.step);break}}}}function W(e,t,i){const o=l.ref(t.modelValue);l.watchEffect(()=>o.value=t.modelValue),l.watch(o,n=>{if(e.formattedSliderValue.value!==n){let a=0;t.min<0?a=n+Math.abs(t.min):a=n-t.min,a>e.sliderRange.value&&(a=e.sliderRange.value),c(a)}});const u=n=>{const a=t.step;let w=0;return n>0?w=Math.round(n/a)*a:w=0,w+t.min},c=n=>{e.formattedSliderValue.value=u(n),t.sticky?e.modelValueUnrounded.value=e.formattedSliderValue.value-t.min:e.modelValueUnrounded.value=n,i("update:modelValue",e.formattedSliderValue.value),i("change",e.formattedSliderValue.value)};return{formatModelValue:u,updateModelValue:c,modelValueRef:o}}function R(e,t,i,o){let u=e.formattedSliderValue.value;const c=(r,f,h)=>{const v=e.slider.value.getBoundingClientRect();let d=0;if(t.orientation==="horizontal")d=(r-v.x)/e.pixelsPerStep.value,t.flip&&(d=e.sliderRange.value-d);else if(t.orientation==="vertical")d=(v.y+v.height-f)/e.pixelsPerStep.value,t.flip&&(d=e.sliderRange.value-d);else{const V=r-v.x,S=f-v.y,m=v.width/2,p=v.height/2,q=(S-p)/(V-m);let y=Math.atan(q)*180/Math.PI;V>=m?S<p?Math.ceil(y)===180?y=0:y=90-Math.abs(y):y+=90:(S<p,y=270+y);const b=e.sliderRange.value/360;d=y*b-t.circleOffset*b,d<0&&(d+=e.sliderRange.value),t.flip&&(d=e.sliderRange.value-d),!t.repeat&&h&&Math.abs(d-u)>b*30&&(d=u)}return u=d,d},n=r=>{let f;if(r.type==="mousemove")r=r,f=r;else{if(r=r,r.touches.length>1)return;f=r.touches[0]}if(e.holding.value){const h=e.slider.value.getBoundingClientRect(),v=t.orientation==="vertical"?h.y+h.height-f.pageY:f.pageX-h.x;(t.orientation==="circular"||v>=0&&v<=e.sliderWidth.value)&&o(c(f.pageX,f.pageY,!0)),i("dragging",e.formattedSliderValue.value,f)}},a=r=>{e.holding.value&&(e.holding.value=!1),r.type==="mouseup"?(window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",n)):(window.removeEventListener("touchend",a),window.removeEventListener("touchmove",n)),i("drag-end",e.formattedSliderValue.value,r)};return{clickHandler:r=>{if(r.preventDefault(),e.holding.value=!0,i("drag-start",e.formattedSliderValue.value,r),r.type==="touchstart"){if(r=r,r.touches.length>1)return;const f=r.touches[0];o(c(f.pageX,f.pageY,!1)),window.addEventListener("touchend",a),window.addEventListener("touchmove",n)}else r=r,o(c(r.pageX,r.pageY,!1)),window.addEventListener("mouseup",a),window.addEventListener("mousemove",n)}}}var J="",B=(e,t)=>{const i=e.__vccOpts||e;for(const[o,u]of t)i[o]=u;return i};const D=l.defineComponent({name:"power-slider",props:T,setup(e,{emit:t}){(e.modelValue<e.min||e.modelValue>e.max)&&console.error("[Vue3Slider] Error: value exceeds limits of slider"),e.max<=e.min&&console.error("[Vue3Slider] Error: Max value cannot be less than or equal to the min value. This will cause unexpected errors to occur, please fix.");const i=$(e),{updateModelValue:o,formatModelValue:u}=W(i,e,t),{handleKeydown:c}=O(i,e,o),{clickHandler:n}=R(i,e,t,o),a=l.ref(!1),w=l.computed(()=>i.holding.value?!0:a.value),r=l.ref(),f=l.computed(()=>{if(!e.tooltip||e.tooltip==="none")return"";let m=(i.formattedSliderValue.value||u(i.modelValueUnrounded.value)).toString();return e.tooltipText.replace("%v",m)}),h=l.ref(0),v=l.computed(()=>{var p;if(!e.tooltip)return 0;let m=h.value;if(e.orientation!=="horizontal"){if(m=(p=r.value)==null?void 0:p.clientHeight,m||(m=20),e.orientation!=="vertical")return m}else m?m+=e.height/3:m=14+i.formattedSliderValue.value.toString().length*9;return i.filledWidth.value-m/2}),d=l.computed(()=>!i.slider.value||e.orientation!=="circular"?1:2*Math.PI*(i.sliderWidth.value/2)),V=l.computed(()=>e.orientation!=="circular"?0:(i.sliderRange.value-i.modelValueUnrounded.value)/i.sliderRange.value*d.value),S=l.computed(()=>({"--width":e.width,"--height":e.height+"px","--color":e.color,"--track-color":e.trackColor,"--tooltip-color":e.tooltipColor,"--tooltip-text-color":e.tooltipTextColor,"--handle-color":e.handleColor,"--handle-border-color":e.handleBorderColor}));return l.onMounted(()=>{M(i,e),z(r,h)}),{filledWidth:i.filledWidth,slider:i.slider,holding:i.holding,flip:l.computed(()=>e.flip),clickHandler:n,handleKeydown:c,applyHandleHoverClass:w,hovering:a,showTooltip:l.computed(()=>e.tooltip==="always"||(a||i.holding)&&e.tooltip==="auto"),tooltip:r,tooltipText:f,tooltipOffset:v,vars:S,circumference:d,strokeOffset:V,circleOffset:l.computed(()=>e.circleOffset),sliderValueDegrees:i.sliderValueDegrees}}}),F={class:"track"},K={class:"track"},P={width:"100%",height:"100%",viewBox:"0 0 100 100",style:{overflow:"visible"}},L=l.createElementVNode("circle",{stroke:"var(--track-color)","vector-effect":"non-scaling-stroke",fill:"none","stroke-width":"var(--height)",r:"50%",cx:"50",cy:"50"},null,-1),U=["stroke-dasharray","stroke-dashoffset"],Y=[l.createElementVNode("div",{class:"handle round-end"},null,-1)];function X(e,t,i,o,u,c){return e.orientation==="horizontal"?(l.openBlock(),l.createElementBlock("div",{key:"horizontal",style:l.normalizeStyle(k({},e.vars)),class:"vue-power-slider",tabindex:"0",ref:"slider",onTouchstart:t[0]||(t[0]=(...n)=>e.clickHandler&&e.clickHandler(...n)),onMousedown:t[1]||(t[1]=(...n)=>e.clickHandler&&e.clickHandler(...n)),onMouseenter:t[2]||(t[2]=n=>e.hovering=!0),onMouseleave:t[3]||(t[3]=n=>e.hovering=!1),onKeydown:t[4]||(t[4]=(...n)=>e.handleKeydown&&e.handleKeydown(...n))},[l.createVNode(l.Transition,{name:"fade"},{default:l.withCtx(()=>[l.withDirectives(l.createElementVNode("div",{class:"tooltip",ref:"tooltip",style:l.normalizeStyle({transform:e.flip?`translate(${-e.tooltipOffset}px)`:`translate(${e.tooltipOffset}px)`,right:e.flip?"0px":void 0,left:e.flip?"auto":void 0,bottom:"max(calc(var(--height, 6px) + 12px), calc(var(--height, 6px) * 1.35))"})},[l.renderSlot(e.$slots,"tooltip",{},()=>[l.createTextVNode(l.toDisplayString(e.tooltipText),1)])],4),[[l.vShow,e.showTooltip]])]),_:3}),l.createElementVNode("div",F,[l.renderSlot(e.$slots,"track")]),l.createElementVNode("div",{class:"track-filled",style:l.normalizeStyle({width:e.filledWidth+"px",right:e.flip?"0px":void 0,left:e.flip?"auto":void 0})},null,4),l.createElementVNode("div",{class:l.normalizeClass(["handle",{hover:e.applyHandleHoverClass}]),style:l.normalizeStyle({[e.flip?"right":"left"]:e.filledWidth-e.height*1.35/2+"px"})},null,6)],36)):e.orientation==="vertical"?(l.openBlock(),l.createElementBlock("div",{key:"vertical",style:l.normalizeStyle(k({},e.vars)),class:"vue-power-slider vertical",tabindex:"0",ref:"slider",onTouchstart:t[5]||(t[5]=(...n)=>e.clickHandler&&e.clickHandler(...n)),onMousedown:t[6]||(t[6]=(...n)=>e.clickHandler&&e.clickHandler(...n)),onMouseenter:t[7]||(t[7]=n=>e.hovering=!0),onMouseleave:t[8]||(t[8]=n=>e.hovering=!1),onKeydown:t[9]||(t[9]=(...n)=>e.handleKeydown&&e.handleKeydown(...n))},[l.createVNode(l.Transition,{name:"fade"},{default:l.withCtx(()=>[l.withDirectives(l.createElementVNode("div",{class:"tooltip",ref:"tooltip",style:l.normalizeStyle({transform:e.flip?`translateY(${e.tooltipOffset}px)`:`translateY(${-e.tooltipOffset}px)`,top:e.flip?"0px":void 0,bottom:e.flip?"auto":void 0,left:"max(calc(var(--height, 6px) + 14px), calc(var(--height, 6px) * 1.35))"})},[l.renderSlot(e.$slots,"tooltip",{},()=>[l.createTextVNode(l.toDisplayString(e.tooltipText),1)])],4),[[l.vShow,e.showTooltip]])]),_:3}),l.createElementVNode("div",K,[l.renderSlot(e.$slots,"track")]),l.createElementVNode("div",{class:"track-filled",style:l.normalizeStyle({height:e.filledWidth+"px",top:e.flip?"0px":void 0,bottom:e.flip?"auto":void 0})},null,4),l.createElementVNode("div",{class:l.normalizeClass(["handle",{hover:e.applyHandleHoverClass}]),style:l.normalizeStyle({[e.flip?"top":"bottom"]:e.filledWidth-e.height*1.35/2+"px"})},null,6)],36)):(l.openBlock(),l.createElementBlock("div",{key:"circular",class:"vue-power-slider circular",tabindex:"0",ref:"slider",style:l.normalizeStyle(k({},e.vars)),onTouchstart:t[10]||(t[10]=(...n)=>e.clickHandler&&e.clickHandler(...n)),onMousedown:t[11]||(t[11]=(...n)=>e.clickHandler&&e.clickHandler(...n)),onMouseenter:t[12]||(t[12]=n=>e.hovering=!0),onMouseleave:t[13]||(t[13]=n=>e.hovering=!1),onKeydown:t[14]||(t[14]=(...n)=>e.handleKeydown&&e.handleKeydown(...n))},[(l.openBlock(),l.createElementBlock("svg",P,[L,l.createElementVNode("circle",{style:l.normalizeStyle([{transform:`rotate(${-90+e.circleOffset}deg) ${e.flip?"scaleY(-1)":""}`},{"transform-origin":"center"}]),stroke:"var(--color)","vector-effect":"non-scaling-stroke",fill:"none","stroke-width":"var(--height)",r:"50%",cx:"50",cy:"50","stroke-dasharray":e.circumference,"stroke-dashoffset":e.strokeOffset},null,12,U)])),l.createElementVNode("div",{class:"handle-container",style:l.normalizeStyle({transform:`rotate(${e.circleOffset}deg)`})},Y,4),l.createElementVNode("div",{class:"handle-container",style:l.normalizeStyle({transform:`rotate(${e.sliderValueDegrees+e.circleOffset}deg)`})},[l.createElementVNode("div",{class:l.normalizeClass(["handle",{hover:e.applyHandleHoverClass}])},null,2),l.createVNode(l.Transition,{name:"fade"},{default:l.withCtx(()=>[l.withDirectives(l.createElementVNode("div",{class:"tooltip",ref:"tooltip",style:l.normalizeStyle({transform:`rotate(${-e.sliderValueDegrees-e.circleOffset}deg)`,top:`calc(max(calc(${e.tooltipOffset}px + 34px), calc(${e.tooltipOffset}px + var(--height) * 1.3)) * -1)`})},[l.renderSlot(e.$slots,"tooltip",{},()=>[l.createTextVNode(l.toDisplayString(e.tooltipText),1)])],4),[[l.vShow,e.showTooltip]])]),_:3})],4)],36))}var A=B(D,[["render",X]]);s.PowerSlider=A,Object.defineProperty(s,"__esModule",{value:!0}),s[Symbol.toStringTag]="Module"});
