var I=Object.defineProperty;var T=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var H=(s,l,v)=>l in s?I(s,l,{enumerable:!0,configurable:!0,writable:!0,value:v}):s[l]=v,k=(s,l)=>{for(var v in l||(l={}))j.call(l,v)&&H(s,v,l[v]);if(T)for(var v of T(l))G.call(l,v)&&H(s,v,l[v]);return s};(function(s,l){typeof exports=="object"&&typeof module!="undefined"?l(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],l):(s=typeof globalThis!="undefined"?globalThis:s||self,l(s.VuePowerSlider={},s.Vue))})(this,function(s,l){"use strict";const v=/(\d*\.?\d+)\s?(cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%+)/i;var N=e=>{const t=e.match(v);return t!==null&&t.length<=3},M={width:{type:String,default:"100%",validator:N},height:{type:Number,default:6},color:{type:String,default:"#FB2727"},trackColor:{type:String,default:"#f1f6f828"},max:{type:Number,default:100},min:{type:Number,default:0},step:{type:Number,default:1,validator(e){return e!==0?!0:(console.error("[Vue3Slider] Error: Step cannot be 0"),!1)}},tooltip:{type:String,default:"auto"},tooltipText:{type:String,default:"%v",validator(e){return e.includes("%v")?!0:(console.error("[Vue3Slider] Error: tooltip text must contain %v"),!1)}},tooltipColor:{type:String,default:"#FFFFFF"},tooltipTextColor:{type:String,default:"#000000"},formatTooltip:{validator(e){return typeof e!="function"?(console.error("[Vue3Slider] Error: formatTooltip must be a function"),!1):typeof e(0)!="string"?(console.error("[Vue3Slider] Error: formatTooltip must return a string"),!1):!0}},orientation:{type:String,default:"horizontal",validator(e){return e==="horizontal"||e==="vertical"||e==="circular"}},modelValue:{type:Number,default:0,required:!0},repeat:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},flip:{type:Boolean,default:!1},circleOffset:{type:Number,default:0,validator(e){return e>=0&&e<=360}}};function z(e){const t=l.ref(document.createElement("div")),i=l.ref(e.modelValue);e.min!==0&&(i.value-=e.min);const o=l.ref(0),f=l.ref(0),c=l.ref(0),r=l.ref(1);let a=l.computed(()=>{let m=0;return e.min<0?m=e.max+Math.abs(e.min):m=e.max-e.min,m});const w=l.computed(()=>{if(e.orientation!=="circular")return 0;const m=i.value/(a.value/360);return e.flip?-m:m}),n=l.ref(!1);return{slider:t,modelValueUnrounded:i,formattedSliderValue:o,filledWidth:c,pixelsPerStep:r,sliderRange:a,sliderValueDegrees:w,sliderWidth:f,holding:n}}function $(e,t){l.watchEffect(()=>{e.filledWidth.value=E(e,t)});const i=new ResizeObserver(o=>{e.filledWidth.value=E(e,t),e.sliderWidth.value=e.slider.value?t.orientation==="vertical"?e.slider.value.clientHeight:e.slider.value.clientWidth:0,e.slider.value!==o[0].target&&e.slider.value instanceof Element&&(i.unobserve(o[0].target),i.observe(e.slider.value))});e.slider.value&&i.observe(e.slider.value)}function E(e,t){const i=e.slider;if(!i.value)return 0;const o=t.orientation==="vertical"?i.value.clientHeight:i.value.clientWidth;return e.pixelsPerStep.value=o/e.sliderRange.value,Math.max(Math.min(e.modelValueUnrounded.value*e.pixelsPerStep.value,o),0)}function O(e,t){const i=new ResizeObserver(o=>{e.value&&(t.value=e.value.clientWidth,e.value!==o[0].target&&(i.unobserve(o[0].target),e.value&&i.observe(e.value)))});e.value&&i.observe(e.value)}function W(e,t,i){const o=c=>{const r=e.modelValueUnrounded.value+c;r<=0?i(0):r>=e.sliderRange.value?i(e.sliderRange.value):i(r)};return{handleKeydown:c=>{switch(c.key){case"ArrowRight":case"ArrowUp":o(t.step);break;case"ArrowLeft":case"ArrowDown":o(-t.step);break}}}}function C(e,t,i){const o=l.ref(t.modelValue);l.watchEffect(()=>o.value=t.modelValue),l.watch(o,r=>{if(e.formattedSliderValue.value!==r){let a=0;t.min<0?a=r+Math.abs(t.min):a=r-t.min,a>e.sliderRange.value&&(a=e.sliderRange.value),c(a)}});const f=r=>{const a=t.step;let w=0;return r>0?w=Math.round(r/a)*a:w=0,w+t.min},c=r=>{e.formattedSliderValue.value=f(r),t.sticky?e.modelValueUnrounded.value=e.formattedSliderValue.value-t.min:e.modelValueUnrounded.value=r,i("update:modelValue",e.formattedSliderValue.value),i("change",e.formattedSliderValue.value)};return{formatModelValue:f,updateModelValue:c,modelValueRef:o}}function R(e,t,i,o){let f=e.formattedSliderValue.value;const c=(n,u,m)=>{const g=e.slider.value.getBoundingClientRect();let d=0;if(t.orientation==="horizontal")d=(n-g.x)/e.pixelsPerStep.value,t.flip&&(d=e.sliderRange.value-d);else if(t.orientation==="vertical")d=(g.y+g.height-u)/e.pixelsPerStep.value,t.flip&&(d=e.sliderRange.value-d);else{const S=n-g.x,V=u-g.y,h=g.width/2,p=g.height/2,q=(V-p)/(S-h);let y=Math.atan(q)*180/Math.PI;S>=h?V<p?Math.ceil(y)===180?y=0:y=90-Math.abs(y):y+=90:(V<p,y=270+y);const b=e.sliderRange.value/360;d=y*b-t.circleOffset*b,d<0&&(d+=e.sliderRange.value),t.flip&&(d=e.sliderRange.value-d),!t.repeat&&m&&Math.abs(d-f)>b*30&&(d=f)}return f=d,d},r=n=>{let u;if(n.type==="mousemove")n=n,u=n;else{if(n=n,n.touches.length>1)return;u=n.touches[0]}if(e.holding.value){const m=e.slider.value.getBoundingClientRect(),g=t.orientation==="vertical"?m.y+m.height-u.pageY:u.pageX-m.x;(t.orientation==="circular"||g>=0&&g<=e.sliderWidth.value)&&o(c(u.pageX,u.pageY,!0)),i("dragging",e.formattedSliderValue.value,u)}},a=n=>{e.holding.value&&(e.holding.value=!1),n.type==="mouseup"?(window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",r)):(window.removeEventListener("touchend",a),window.removeEventListener("touchmove",r)),i("drag-end",e.formattedSliderValue.value,n)};return{clickHandler:n=>{if(n.preventDefault(),e.holding.value=!0,i("drag-start",e.formattedSliderValue.value,n),n.type==="touchstart"){if(n=n,n.touches.length>1)return;const u=n.touches[0];o(c(u.pageX,u.pageY,!1)),window.addEventListener("touchend",a),window.addEventListener("touchmove",r)}else n=n,o(c(n.pageX,n.pageY,!1)),window.addEventListener("mouseup",a),window.addEventListener("mousemove",r)}}}var J="",D=(e,t)=>{const i=e.__vccOpts||e;for(const[o,f]of t)i[o]=f;return i};const B=l.defineComponent({name:"power-slider",props:M,setup(e,{emit:t}){(e.modelValue<e.min||e.modelValue>e.max)&&console.error("[Vue3Slider] Error: value exceeds limits of slider"),e.max<=e.min&&console.error("[Vue3Slider] Error: Max value cannot be less than or equal to the min value. This will cause unexpected errors to occur, please fix.");const i=z(e),{updateModelValue:o,formatModelValue:f}=C(i,e,t),{handleKeydown:c}=W(i,e,o),{clickHandler:r}=R(i,e,t,o),a=l.ref(!1),w=l.computed(()=>i.holding.value?!0:a.value),n=l.ref(),u=l.computed(()=>{if(!e.tooltip)return"";let h="";return e.formatTooltip!==null&&typeof e.formatTooltip=="function"?h=e.formatTooltip(i.formattedSliderValue.value||f(i.modelValueUnrounded.value)):h=(i.formattedSliderValue.value||f(i.modelValueUnrounded.value)).toString(),e.tooltipText.replace("%v",h)}),m=l.ref(0),g=l.computed(()=>{var p;if(!e.tooltip)return 0;let h=m.value;if(e.orientation!=="horizontal"){if(h=(p=n.value)==null?void 0:p.clientHeight,h||(h=20),e.orientation!=="vertical")return h}else h?h+=e.height/3:h=14+i.formattedSliderValue.value.toString().length*9;return i.filledWidth.value-h/2}),d=l.computed(()=>!i.slider.value||e.orientation!=="circular"?1:2*Math.PI*(i.sliderWidth.value/2)),S=l.computed(()=>e.orientation!=="circular"?0:(i.sliderRange.value-i.modelValueUnrounded.value)/i.sliderRange.value*d.value),V=l.computed(()=>({"--width":e.width,"--height":e.height+"px","--color":e.color,"--track-color":e.trackColor,"--tooltip-color":e.tooltipColor,"--tooltip-text-color":e.tooltipTextColor}));return l.onMounted(()=>{$(i,e),O(n,m)}),{filledWidth:i.filledWidth,slider:i.slider,holding:i.holding,flip:l.computed(()=>e.flip),clickHandler:r,handleKeydown:c,applyHandleHoverClass:w,hovering:a,showTooltip:l.computed(()=>e.tooltip==="always"||(a||i.holding)&&e.tooltip==="auto"),tooltip:n,tooltipText:u,tooltipOffset:g,vars:V,circumference:d,strokeOffset:S,circleOffset:l.computed(()=>e.circleOffset),sliderValueDegrees:i.sliderValueDegrees}}}),K=l.createElementVNode("div",{class:"track"},null,-1),P=l.createElementVNode("div",{class:"track"},null,-1),F={width:"100%",height:"100%",viewBox:"0 0 100 100",style:{overflow:"visible"}},L=l.createElementVNode("circle",{stroke:"var(--track-color)","vector-effect":"non-scaling-stroke",fill:"none","stroke-width":"var(--height)",r:"50%",cx:"50",cy:"50"},null,-1),U=["stroke-dasharray","stroke-dashoffset"],Y=[l.createElementVNode("div",{class:"handle round-end"},null,-1)];function X(e,t,i,o,f,c){return e.orientation==="horizontal"?(l.openBlock(),l.createElementBlock("div",{key:"horizontal",style:l.normalizeStyle(k({},e.vars)),class:"vue-power-slider",tabindex:"0",ref:"slider",onTouchstart:t[0]||(t[0]=(...r)=>e.clickHandler&&e.clickHandler(...r)),onMousedown:t[1]||(t[1]=(...r)=>e.clickHandler&&e.clickHandler(...r)),onMouseenter:t[2]||(t[2]=r=>e.hovering=!0),onMouseleave:t[3]||(t[3]=r=>e.hovering=!1),onKeydown:t[4]||(t[4]=(...r)=>e.handleKeydown&&e.handleKeydown(...r))},[l.createVNode(l.Transition,{name:"fade"},{default:l.withCtx(()=>[l.withDirectives(l.createElementVNode("div",{class:"tooltip",ref:"tooltip",style:l.normalizeStyle({transform:e.flip?`translate(${-e.tooltipOffset}px)`:`translate(${e.tooltipOffset}px)`,right:e.flip?"0px":void 0,left:e.flip?"auto":void 0,bottom:"max(calc(var(--height, 6px) + 12px), calc(var(--height, 6px) * 1.35))"})},[l.renderSlot(e.$slots,"default",{},()=>[l.createTextVNode(l.toDisplayString(e.tooltipText),1)])],4),[[l.vShow,e.showTooltip]])]),_:3}),K,l.createElementVNode("div",{class:"track-filled",style:l.normalizeStyle({width:e.filledWidth+"px",right:e.flip?"0px":void 0,left:e.flip?"auto":void 0})},null,4),l.createElementVNode("div",{class:l.normalizeClass(["handle",{hover:e.applyHandleHoverClass}]),style:l.normalizeStyle({[e.flip?"right":"left"]:e.filledWidth-e.height*1.35/2+"px"})},null,6)],36)):e.orientation==="vertical"?(l.openBlock(),l.createElementBlock("div",{key:"vertical",style:l.normalizeStyle(k({},e.vars)),class:"vue-power-slider vertical",tabindex:"0",ref:"slider",onTouchstart:t[5]||(t[5]=(...r)=>e.clickHandler&&e.clickHandler(...r)),onMousedown:t[6]||(t[6]=(...r)=>e.clickHandler&&e.clickHandler(...r)),onMouseenter:t[7]||(t[7]=r=>e.hovering=!0),onMouseleave:t[8]||(t[8]=r=>e.hovering=!1),onKeydown:t[9]||(t[9]=(...r)=>e.handleKeydown&&e.handleKeydown(...r))},[l.createVNode(l.Transition,{name:"fade"},{default:l.withCtx(()=>[l.withDirectives(l.createElementVNode("div",{class:"tooltip",ref:"tooltip",style:l.normalizeStyle({transform:e.flip?`translateY(${e.tooltipOffset}px)`:`translateY(${-e.tooltipOffset}px)`,top:e.flip?"0px":void 0,bottom:e.flip?"auto":void 0,left:"max(calc(var(--height, 6px) + 14px), calc(var(--height, 6px) * 1.35))"})},[l.renderSlot(e.$slots,"default",{},()=>[l.createTextVNode(l.toDisplayString(e.tooltipText),1)])],4),[[l.vShow,e.showTooltip]])]),_:3}),P,l.createElementVNode("div",{class:"track-filled",style:l.normalizeStyle({height:e.filledWidth+"px",top:e.flip?"0px":void 0,bottom:e.flip?"auto":void 0})},null,4),l.createElementVNode("div",{class:l.normalizeClass(["handle",{hover:e.applyHandleHoverClass}]),style:l.normalizeStyle({[e.flip?"top":"bottom"]:e.filledWidth-e.height*1.35/2+"px"})},null,6)],36)):(l.openBlock(),l.createElementBlock("div",{key:"circular",class:"vue-power-slider circular",tabindex:"0",ref:"slider",style:l.normalizeStyle(k({},e.vars)),onTouchstart:t[10]||(t[10]=(...r)=>e.clickHandler&&e.clickHandler(...r)),onMousedown:t[11]||(t[11]=(...r)=>e.clickHandler&&e.clickHandler(...r)),onMouseenter:t[12]||(t[12]=r=>e.hovering=!0),onMouseleave:t[13]||(t[13]=r=>e.hovering=!1),onKeydown:t[14]||(t[14]=(...r)=>e.handleKeydown&&e.handleKeydown(...r))},[(l.openBlock(),l.createElementBlock("svg",F,[L,l.createElementVNode("circle",{style:l.normalizeStyle([{transform:`rotate(${-90+e.circleOffset}deg) ${e.flip?"scaleY(-1)":""}`},{"transform-origin":"center"}]),stroke:"var(--color)","vector-effect":"non-scaling-stroke",fill:"none","stroke-width":"var(--height)",r:"50%",cx:"50",cy:"50","stroke-dasharray":e.circumference,"stroke-dashoffset":e.strokeOffset},null,12,U)])),l.createElementVNode("div",{class:"handle-container",style:l.normalizeStyle({transform:`rotate(${e.circleOffset}deg)`})},Y,4),l.createElementVNode("div",{class:"handle-container",style:l.normalizeStyle({transform:`rotate(${e.sliderValueDegrees+e.circleOffset}deg)`})},[l.createElementVNode("div",{class:l.normalizeClass(["handle",{hover:e.applyHandleHoverClass}])},null,2),l.createVNode(l.Transition,{name:"fade"},{default:l.withCtx(()=>[l.withDirectives(l.createElementVNode("div",{class:"tooltip",ref:"tooltip",style:l.normalizeStyle({transform:`rotate(${-e.sliderValueDegrees-e.circleOffset}deg)`,top:`calc(max(calc(${e.tooltipOffset}px + 34px), calc(${e.tooltipOffset}px + var(--height) * 1.3)) * -1)`})},[l.renderSlot(e.$slots,"default",{},()=>[l.createTextVNode(l.toDisplayString(e.tooltipText),1)])],4),[[l.vShow,e.showTooltip]])]),_:3})],4)],36))}var A=D(B,[["render",X]]);s.PowerSlider=A,Object.defineProperty(s,"__esModule",{value:!0}),s[Symbol.toStringTag]="Module"});
